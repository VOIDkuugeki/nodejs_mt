<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hotel Booking</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header Section -->
    <header class="bg-warning text-white py-2">
      <div class="container d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h3">Hotel Booking</h1>
        </div>
        <nav class="navbar">
          <a href="#" class="text-white me-3">Home</a>
          <a href="#" class="text-white me-3">Rooms</a>
          <a href="#" class="text-white me-3">Gallery</a>
          <a href="#" class="text-white me-3">Blog</a>
          <a href="#" class="text-white me-3">About Us</a>
          <a href="#" class="text-white me-3">Contact Us</a>
        </nav>
      </div>
    </header>

    <!-- Main Banner Section -->
    <section
      class="banner text-white text-center py-5"
      style="
        background-image: url('https://restinn.webinane.com/wp-content/uploads/2022/02/restinn-slide.jpg');
        background-size: cover;
      "
    >
      <div class="container">
        <h1 class="display-4">The Best Hotel & Restaurant</h1>
        <p class="lead">
          Deals on Discounts, Special Member Prices, Instant Coupons!
        </p>
        <button
          id="openModal"
          class="btn btn-primary"
          data-toggle="modal"
          data-target="#checkoutModal"
          class="btn btn-warning btn-lg mt-3"
        >
          Book Now
        </button>
      </div>
    </section>

    <!-- Reservation Form -->
    <section class="reservation py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-4">Make A Reservation</h2>
        <form class="row g-3 justify-content-center">
          <div class="col-md-2">
            <input
              type="date"
              class="form-control"
              placeholder="Check-in"
              name="checkin"
            />
          </div>
          <div class="col-md-2">
            <input
              type="date"
              class="form-control"
              placeholder="Check-out"
              name="checkout"
            />
          </div>
          <div class="col-md-2">
            <input
              type="number"
              class="form-control"
              placeholder="Adults"
              name="adults"
            />
          </div>
          <div class="col-md-2">
            <input
              type="number"
              class="form-control"
              placeholder="Kids"
              name="kids"
            />
          </div>
          <div class="col-md-2">
            <select class="form-select" name="room-type">
              <option>Select Room Type</option>
              <option>Family Room</option>
              <option>Standard Room</option>
              <option>Deluxe Room</option>
              <option>Luxury Room</option>
            </select>
          </div>
          <div class="col-md-2 text-center">
            <button type="submit" class="btn btn-warning w-100">
              Search Now
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- Room Highlights -->
    <section class="room-highlights py-5">
      <div class="container">
        <h2 class="text-center mb-4">Room Highlights</h2>
        <div class="d-flex justify-content-center mb-4">
          <button class="btn btn-outline-warning mx-1">All Rooms</button>
          <button class="btn btn-outline-warning mx-1">Double Room</button>
          <button class="btn btn-outline-warning mx-1">Family Room</button>
          <button class="btn btn-outline-warning mx-1">Luxury Room</button>
          <button class="btn btn-outline-warning mx-1">Single Room</button>
        </div>
        <div class="row" id="room-cards">
          <!-- Cards will be inserted here -->
        </div>
      </div>
    </section>
    <div
      class="modal fade"
      id="checkoutModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="checkoutModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <!-- First Section: Room Information -->
          <div id="modalRoomSection">
            <div class="modal-header bg-primary text-white">
              <h5 class="modal-title" id="checkoutModalLabel">Standard Room</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>Room Info (3 Beds, 6 Adults, 1 Child, Attached Bathroom)</p>
              <button class="btn btn-secondary mb-3">
                Check Room Availability
              </button>

              <h5>Additional Services</h5>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="service1" />
                <label class="form-check-label" for="service1"
                  >Car & ATV Rental (60$)</label
                >
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="service2" />
                <label class="form-check-label" for="service2"
                  >Yacht Hiring (70$)</label
                >
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="service3" />
                <label class="form-check-label" for="service3"
                  >Postal/Parcel Services (10$)</label
                >
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="service4" />
                <label class="form-check-label" for="service4"
                  >Porter Service (80$)</label
                >
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="service5" />
                <label class="form-check-label" for="service5"
                  >Horseback Riding (100$)</label
                >
              </div>

              <div class="form-row mt-3">
                <div class="col-md-6">
                  <label for="checkin-date">Check-in Date</label>
                  <input
                    type="date"
                    class="form-control"
                    id="checkin-date"
                    placeholder="Check-in Date"
                  />
                </div>
                <div class="col-md-6">
                  <label for="checkout-date">Check-out Date</label>
                  <input
                    type="date"
                    class="form-control"
                    id="checkout-date"
                    placeholder="Check-out Date"
                  />
                </div>
              </div>

              <div class="form-row mt-3">
                <div class="col-md-6">
                  <label for="adults">Adults</label>
                  <select class="form-control" id="adults">
                    <option>Select Adults</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="children">Children</label>
                  <select class="form-control" id="children">
                    <option>Select Children</option>
                    <option>0</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                  </select>
                </div>
              </div>

              <button
                class="btn btn-primary mt-4"
                id="confirmBtn"
                data-toggle="collapse"
                data-target="#modalConfirmSection"
              >
                Confirm and Book Room
              </button>
            </div>
          </div>

          <!-- Second Section: Booking Confirmation -->
          <div id="modalConfirmSection" class="collapse">
            <div class="modal-header bg-primary text-white">
              <h5 class="modal-title">Confirm and Book Room</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <!-- Guest Information -->
                <div class="col-md-6">
                  <h5>Guest Information</h5>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="First Name"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Last Name"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Phone Number"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="email"
                      class="form-control"
                      placeholder="Email"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Address Line 1"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Address Line 2"
                    />
                  </div>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Special Request"
                    />
                  </div>
                </div>
                <!-- Billing Details -->
                <div class="col-md-6">
                  <h5>Billing Details</h5>
                  <p>
                    <strong>Arrival:</strong>
                    <span id="arrivalDate">[Date]</span>
                  </p>
                  <p>
                    <strong>Departure:</strong>
                    <span id="departureDate">[Date]</span>
                  </p>
                  <p>
                    <strong>Length of Stay:</strong>
                    <span id="lengthOfStay">[Nights]</span>
                  </p>
                  <p><strong>Room:</strong> Standard Room</p>
                  <p>
                    <strong>Guests:</strong>
                    <span id="guestCount">2 Adults</span>
                  </p>
                  <p><strong>Best Available Rate:</strong> $450</p>
                  <p><strong>Additional Services Charges:</strong> $50</p>
                  <p><strong>Subtotal:</strong> $500</p>
                  <p><strong>Total Cost:</strong> $500</p>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-success">Confirm Booking</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
      $(document).ready(function () {
        $("#confirmBtn").click(function () {
          $("#modalRoomSection").collapse("hide");
          $("#modalConfirmSection").collapse("show");

          // Update billing details based on user input
          $("#arrivalDate").text($("#checkin-date").val());
          $("#departureDate").text($("#checkout-date").val());
          $("#lengthOfStay").text(calculateStay());
          $("#guestCount").text($("#adults").val() + " Adults");
        });

        function calculateStay() {
          const checkinDate = new Date($("#checkin-date").val());
          const checkoutDate = new Date($("#checkout-date").val());
          const timeDiff = checkoutDate - checkinDate;
          const dayDiff = timeDiff / (1000 * 3600 * 24);
          return dayDiff > 0 ? dayDiff : 0; // Return 0 if the difference is negative
        }
      });
    </script>

    <script>
      async function fetchRooms() {
        try {
          const response = await fetch(
            "https://6720c39598bbb4d93ca5df7a.mockapi.io/T_room"
          );
          const rooms = await response.json();
          const roomCardsContainer = document.getElementById("room-cards");

          rooms.forEach((room) => {
            const card = document.createElement("div");
            card.className = "col-md-3 mb-4";
            card.innerHTML = `
            <div class="card h-100">
              <img src="${room.room_image}" class="card-img-top" alt="${room.room_type}">
              <div class="card-body" id="${room.id}">
                <h5 class="card-title">${room.room_type}</h5>
                <p class="card-text"><strong>Status:</strong> ${room.status}</p>
                <p class="card-text"><strong>Price:</strong> ${room.price}</p>
                <p class="card-text" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;"><strong>Description:</strong> ${room.content}                
                <div class="text-center">
                <button class="btn btn-primary w-200"  id="openModal" class="btn btn-primary" data-toggle="modal" data-target="#checkoutModal">Book Now</button>
                <button class="btn btn-primary w-200">View Detail</button>
              </div>
              </div>
            </div>
          `;
            roomCardsContainer.appendChild(card);
          });
        } catch (error) {
          console.error("Error fetching rooms:", error);
        }
      }

      document.addEventListener("DOMContentLoaded", fetchRooms);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
